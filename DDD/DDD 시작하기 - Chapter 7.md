# 도메인 서비스
- 도메인 서비스

## 여러 애그리거트가 필요한 기능
- 도메인 영역의 코드를 작성하다 보면, 한 애그리거트로 기능을 구현할 수 없을 때가 있음
- 한 애그리거트에 넣기 애매한 도메인 기능을 억지로 특정 애그리거트에 구현하면 문제가 생김
  - 이러한 문제를 해소하는 가장 쉬운 방법 → 도메인 기능을 별도 서비스로 구현하는 것

## 도메인 서비스
- 도메인 서비스는 도메인 영역에 위치한 도메인 로직을 표현할 때 사용함
  - 주로 다음 상황에서 사용
    - 계산 로직
      - 여러 애그리거트가 필요한 계산 로직이나, 한 애그리거트에 넣기에는 다소 복잡한 계산 로직 
    - 외부 시스템 연동이 필요한 도메인 로직
      - 구현하기 위해 타 시스템을 사용해야 하는 도메인 로직
- 계산 로직과 도메인 서비스
  - 도메인 영역의 애그리거트나 밸류와 같은 구성요소와 도메인 서비스를 비교할 때 다른 점은 도메인 서비스는 상태 없이 로직만 구현한다는 점
    - 도메인 서비스를 구현하는 데 필요한 상태는 다른 방법으로 전달받음
  - 도메인 서비스 객체를 애그리거트에 주입하지 않기
  - 도메인 서비스는 도메인 로직을 수행하지 응용 로직을 수행하진 않음
    - 트랜잭션 처리와 같은 로직은 응용 로직이므로 도메인 서비스가 아닌 응용 서비스에서 처리해야 함
- 외부 시스템 연동과 도메인 서비스
- 도메인 서비스의 패키지 위치
  - 도메인 서비스는 도메인 로직을 표현하므로 도메인 서비스의 위치는 다른 도메인 구성요소와 동일한 패키지에 위치
  - 도메인 서비스의 개수가 많거나 엔티티나 밸류와 같은 다른 구성요소와 명시적으로 구분하고 싶은 경우
    - domain 패키지 밑에 model, service, repository와 같이 하위 패키지를 구분하여 위치시켜도 됨
- 도메인 서비스의 인터페이스와 클래스
  - 도메인 서비스의 구현이 특정 기술에 종속되면 인터페이스와 구현 클래스로 분리함
  - 이를 통해 도메인 영역이 특정 구현에 종속되는 것을 방지할 수 있고 도메인 영역에 대한 테스트가 쉬워짐